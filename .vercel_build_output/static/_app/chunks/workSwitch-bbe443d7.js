function g(i,b={}){const l=new Set;let t;function h(n){return l.add(n),n(i),()=>l.delete(n)}function _(n,o,e){const u={from:i,to:n,event:o,args:e};f("_exit",u),i=n,l.forEach(c=>c(i)),f("_enter",u)}function f(n,...o){var u,c,w;const e=(w=(u=b[i])==null?void 0:u[n])!=null?w:(c=b["*"])==null?void 0:c[n];return e instanceof Function?e.apply(t,o):e}function r(n,...o){var u;const e=(u=f(n,...o))==null?void 0:u.valueOf();return["string","symbol"].includes(typeof e)&&e!==i&&_(e,n,o),i}const s={};async function d(n,o=100,...e){return clearTimeout(s[n]),o===null?i:(await new Promise(u=>s[n]=setTimeout(u,o)),delete s[n],r(n,...e))}function m(...n){if(n.length===1&&n[0]instanceof Function)return h(n[0]);r("subscribe",...n)}return m.debounce=d.bind(null,"subscribe"),t=new Proxy({subscribe:m},{get(n,o){return Reflect.has(n,o)||(n[o]=r.bind(null,o),n[o].debounce=d.bind(null,o)),Reflect.get(n,o)}}),f("_enter",{from:null,to:i,event:null,args:[]}),t}const x=g("off",{off:{_enter(){console.log("off")},toggle:"on",turnOn:"on"},on:{_enter(){console.log("on")},toggle:"off",turnOff:"off"}});export{g as f,x as w};
